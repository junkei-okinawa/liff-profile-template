# 01. 要件定義書

## 1. 概要
本アプリケーションは、LINE Front-end Framework (LIFF) を利用したユーザープロフィール閲覧および利用規約同意管理アプリケーションである。
ユーザーは自身のLINEプロフィール情報を確認できるほか、利用規約への同意、ログアウト、退会処理を行うことができる。

## 2. 機能要件

### 2.1 ユーザー認証・認可
- **LINEログイン**: LIFF SDKを使用し、LINEアカウントでのログインを行う。
- **自動ログイン**: アプリケーション起動時にログイン状態を確認し、未ログインの場合はログイン画面へリダイレクトする。

### 2.2 プロフィール表示
- 以下のユーザー情報を表示する。
    - プロフィール画像
    - 表示名 (Display Name)
    - ステータスメッセージ
    - ユーザーID (User ID)
    - 言語設定
    - OS情報

### 2.3 利用規約 (Terms of Use)
- **規約表示**: Markdown形式で記述された利用規約 (`terms.md`) をHTMLに変換して表示する。
- **同意管理**:
    - 初回アクセス時または未同意の場合、「規約に同意する」ボタンを表示する。
    - 既同意の場合、「規約に同意済みです」と表示する。
    - 同意状態はFirestoreの `users` コレクション (`terms_accepted_at` フィールド) で管理する。

### 2.4 ログアウト
- プロフィール画面からログアウトが可能。
- ログアウト後はページをリロードし、再度ログインフローへ遷移する。

### 2.5 退会 (Unsubscribe)
- **退会確認**: Markdown形式で記述された退会確認文言 (`unsubscribe.md`) を表示する。
- **退会処理**:
    - 「退会する」ボタン押下後、完了画面へ遷移する。
    - 完了画面では3秒間のカウントダウンを表示した後、自動的にログアウト処理を実行する。
    - *注: 実際のデータ削除処理はバックエンド側で実装が必要（現状はフロントエンドのログアウトのみ）。*

## 3. 非機能要件

### 3.1 UI/UX
- **言語**: 日本語 (Japanese) を基本とする。
- **レスポンシブ**: スマートフォンでの閲覧を主としたデザインとする。
- **パフォーマンス**: 利用規約などの静的コンテンツは高速に表示されること（Firestoreの読み込み待ちでブロックしない）。

### 3.2 環境
- **プラットフォーム**: LINEアプリ内ブラウザ (LIFF) および 外部ブラウザ。
- **インフラ**: 静的ホスティング (Viteビルド成果物)、Firebase Firestore。
